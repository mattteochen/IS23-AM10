<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PrivatePatternFactory.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">is23am10</a> &gt; <a href="index.source.html" class="el_package">it.polimi.is23am10.server.model.factory</a> &gt; <span class="el_source">PrivatePatternFactory.java</span></div><h1>PrivatePatternFactory.java</h1><pre class="source lang-java linenums">package it.polimi.is23am10.server.model.factory;

import it.polimi.is23am10.server.model.items.bookshelf.Bookshelf;
import it.polimi.is23am10.server.model.items.bookshelf.exceptions.BookshelfGridColIndexOutOfBoundsException;
import it.polimi.is23am10.server.model.items.bookshelf.exceptions.BookshelfGridRowIndexOutOfBoundsException;
import it.polimi.is23am10.server.model.items.tile.Tile.TileType;
import it.polimi.is23am10.server.model.pattern.PrivatePattern;
import it.polimi.is23am10.utils.exceptions.NullIndexValueException;
import java.util.List;
import java.util.Random;
import java.util.function.Function;
import java.util.stream.Collectors;

/**
 * Private pattern factory object.
 * This creates a new {@link PrivatePattern}
 *
 * @author Alessandro Amandonico (alessandro.amandonico@mail.polimi.it)
 * @author Francesco Buccoliero (francesco.buccoliero@mail.polimi.it)
 * @author Kaixi Matteo Chen (kaiximatteo.chen@mail.polimi.it)
 * @author Lorenzo Cavallero (lorenzo1.cavallero@mail.polimi.it)
 */
public final class PrivatePatternFactory {

  /**
   * Private constructor.
   * 
   */
  private PrivatePatternFactory() {

  }

  /**
   * The random generator instance.
   * 
   */
<span class="fc" id="L37">  private static final Random random = new Random();</span>

  /**
   * PrivatePattern Rule #1.
   * 
   */
<span class="fc" id="L43">  public static final Function&lt;Bookshelf, Integer&gt; checkPattern1 = bs -&gt; {</span>
<span class="fc" id="L44">    int tilesMatched = 0;</span>

    try {
<span class="fc bfc" id="L47" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(0, 0).getType() == (TileType.PLANT)) {</span>
<span class="fc" id="L48">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L50" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(0, 2).getType() == (TileType.FRAME)) {</span>
<span class="fc" id="L51">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L53" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(1, 4).getType() == (TileType.CAT)) {</span>
<span class="fc" id="L54">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L56" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(2, 3).getType() == (TileType.BOOK)) {</span>
<span class="fc" id="L57">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L59" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(3, 1).getType() == (TileType.GAME)) {</span>
<span class="fc" id="L60">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L62" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(5, 2).getType() == (TileType.TROPHY)) {</span>
<span class="fc" id="L63">        tilesMatched++;</span>
      }
<span class="fc" id="L65">      return tilesMatched;</span>
<span class="nc" id="L66">    } catch (BookshelfGridColIndexOutOfBoundsException | BookshelfGridRowIndexOutOfBoundsException</span>
        | NullIndexValueException e) {
<span class="nc" id="L68">      return 0;</span>
    }
  };

  /**
   * PrivatePattern Rule #2.
   * 
   */
<span class="fc" id="L76">  public static final Function&lt;Bookshelf, Integer&gt; checkPattern2 = bs -&gt; {</span>
<span class="fc" id="L77">    int tilesMatched = 0;</span>

    try {
<span class="fc bfc" id="L80" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(1, 1).getType() == (TileType.PLANT)) {</span>
<span class="fc" id="L81">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L83" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(2, 0).getType() == (TileType.CAT)) {</span>
<span class="fc" id="L84">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L86" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(2, 2).getType() == (TileType.GAME)) {</span>
<span class="fc" id="L87">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L89" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(3, 4).getType() == (TileType.BOOK)) {</span>
<span class="fc" id="L90">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L92" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(4, 3).getType() == (TileType.TROPHY)) {</span>
<span class="fc" id="L93">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L95" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(5, 4).getType() == (TileType.FRAME)) {</span>
<span class="fc" id="L96">        tilesMatched++;</span>
      }
<span class="fc" id="L98">      return tilesMatched;</span>
<span class="nc" id="L99">    } catch (BookshelfGridColIndexOutOfBoundsException | BookshelfGridRowIndexOutOfBoundsException</span>
        | NullIndexValueException e) {
<span class="nc" id="L101">      return 0;</span>
    }
  };

  /**
   * PrivatePattern Rule #3.
   * 
   */
<span class="fc" id="L109">  public static final Function&lt;Bookshelf, Integer&gt; checkPattern3 = bs -&gt; {</span>
<span class="fc" id="L110">    int tilesMatched = 0;</span>

    try {
<span class="fc bfc" id="L113" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(1, 0).getType() == (TileType.FRAME)) {</span>
<span class="fc" id="L114">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L116" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(1, 3).getType() == (TileType.GAME)) {</span>
<span class="fc" id="L117">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L119" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(2, 2).getType() == (TileType.PLANT)) {</span>
<span class="fc" id="L120">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L122" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(3, 1).getType() == (TileType.CAT)) {</span>
<span class="fc" id="L123">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L125" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(3, 4).getType() == (TileType.TROPHY)) {</span>
<span class="fc" id="L126">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L128" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(5, 0).getType() == (TileType.BOOK)) {</span>
<span class="fc" id="L129">        tilesMatched++;</span>
      }
<span class="fc" id="L131">      return tilesMatched;</span>
<span class="nc" id="L132">    } catch (BookshelfGridColIndexOutOfBoundsException | BookshelfGridRowIndexOutOfBoundsException</span>
        | NullIndexValueException e) {
<span class="nc" id="L134">      return 0;</span>
    }
  };

  /**
   * PrivatePattern Rule #4.
   * 
   */
<span class="fc" id="L142">  public static final Function&lt;Bookshelf, Integer&gt; checkPattern4 = bs -&gt; {</span>
<span class="fc" id="L143">    int tilesMatched = 0;</span>

    try {
<span class="fc bfc" id="L146" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(0, 4).getType() == (TileType.GAME)) {</span>
<span class="fc" id="L147">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L149" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(2, 0).getType() == (TileType.TROPHY)) {</span>
<span class="fc" id="L150">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L152" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(2, 2).getType() == (TileType.FRAME)) {</span>
<span class="fc" id="L153">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L155" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(3, 3).getType() == (TileType.PLANT)) {</span>
<span class="fc" id="L156">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L158" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(4, 1).getType() == (TileType.BOOK)) {</span>
<span class="fc" id="L159">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L161" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(4, 2).getType() == (TileType.CAT)) {</span>
<span class="fc" id="L162">        tilesMatched++;</span>
      }
<span class="fc" id="L164">      return tilesMatched;</span>
<span class="nc" id="L165">    } catch (BookshelfGridColIndexOutOfBoundsException | BookshelfGridRowIndexOutOfBoundsException</span>
        | NullIndexValueException e) {
<span class="nc" id="L167">      return 0;</span>
    }
  };

  /**
   * PrivatePattern Rule #5.
   * 
   */
<span class="fc" id="L175">  public static final Function&lt;Bookshelf, Integer&gt; checkPattern5 = bs -&gt; {</span>
<span class="fc" id="L176">    int tilesMatched = 0;</span>

    try {
<span class="fc bfc" id="L179" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(1, 1).getType() == (TileType.TROPHY)) {</span>
<span class="fc" id="L180">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L182" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(3, 1).getType() == (TileType.FRAME)) {</span>
<span class="fc" id="L183">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L185" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(3, 2).getType() == (TileType.BOOK)) {</span>
<span class="fc" id="L186">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L188" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(4, 4).getType() == (TileType.PLANT)) {</span>
<span class="fc" id="L189">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L191" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(5, 0).getType() == (TileType.GAME)) {</span>
<span class="fc" id="L192">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L194" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(5, 3).getType() == (TileType.CAT)) {</span>
<span class="fc" id="L195">        tilesMatched++;</span>
      }
<span class="fc" id="L197">      return tilesMatched;</span>
<span class="nc" id="L198">    } catch (BookshelfGridColIndexOutOfBoundsException | BookshelfGridRowIndexOutOfBoundsException</span>
        | NullIndexValueException e) {
<span class="nc" id="L200">      return 0;</span>
    }
  };

  /**
   * PrivatePattern Rule #6.
   * 
   */
<span class="fc" id="L208">  public static final Function&lt;Bookshelf, Integer&gt; checkPattern6 = bs -&gt; {</span>
<span class="fc" id="L209">    int tilesMatched = 0;</span>

    try {
<span class="fc bfc" id="L212" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(0, 2).getType() == (TileType.TROPHY)) {</span>
<span class="fc" id="L213">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L215" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(0, 4).getType() == (TileType.CAT)) {</span>
<span class="fc" id="L216">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L218" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(2, 3).getType() == (TileType.BOOK)) {</span>
<span class="fc" id="L219">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L221" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(4, 1).getType() == (TileType.GAME)) {</span>
<span class="fc" id="L222">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L224" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(4, 3).getType() == (TileType.FRAME)) {</span>
<span class="fc" id="L225">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L227" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(5, 0).getType() == (TileType.PLANT)) {</span>
<span class="fc" id="L228">        tilesMatched++;</span>
      }
<span class="fc" id="L230">      return tilesMatched;</span>
<span class="nc" id="L231">    } catch (BookshelfGridColIndexOutOfBoundsException | BookshelfGridRowIndexOutOfBoundsException</span>
        | NullIndexValueException e) {
<span class="nc" id="L233">      return 0;</span>
    }
  };

  /**
   * PrivatePattern Rule #7.
   * 
   */
<span class="fc" id="L241">  public static final Function&lt;Bookshelf, Integer&gt; checkPattern7 = bs -&gt; {</span>
<span class="fc" id="L242">    int tilesMatched = 0;</span>

    try {
<span class="fc bfc" id="L245" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(0, 0).getType() == (TileType.CAT)) {</span>
<span class="fc" id="L246">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L248" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(1, 3).getType() == (TileType.FRAME)) {</span>
<span class="fc" id="L249">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L251" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(2, 1).getType() == (TileType.PLANT)) {</span>
<span class="fc" id="L252">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L254" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(3, 0).getType() == (TileType.TROPHY)) {</span>
<span class="fc" id="L255">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L257" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(4, 4).getType() == (TileType.GAME)) {</span>
<span class="fc" id="L258">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L260" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(5, 2).getType() == (TileType.BOOK)) {</span>
<span class="fc" id="L261">        tilesMatched++;</span>
      }
<span class="fc" id="L263">      return tilesMatched;</span>
<span class="nc" id="L264">    } catch (BookshelfGridColIndexOutOfBoundsException | BookshelfGridRowIndexOutOfBoundsException</span>
        | NullIndexValueException e) {
<span class="nc" id="L266">      return 0;</span>
    }
  };

  /**
   * PrivatePattern Rule #8.
   * 
   */
<span class="fc" id="L274">  public static final Function&lt;Bookshelf, Integer&gt; checkPattern8 = bs -&gt; {</span>
<span class="fc" id="L275">    int tilesMatched = 0;</span>

    try {
<span class="fc bfc" id="L278" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(0, 4).getType() == (TileType.FRAME)) {</span>
<span class="fc" id="L279">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L281" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(1, 1).getType() == (TileType.CAT)) {</span>
<span class="fc" id="L282">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L284" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(2, 2).getType() == (TileType.TROPHY)) {</span>
<span class="fc" id="L285">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L287" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(3, 0).getType() == (TileType.PLANT)) {</span>
<span class="fc" id="L288">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L290" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(4, 3).getType() == (TileType.BOOK)) {</span>
<span class="fc" id="L291">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L293" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(5, 3).getType() == (TileType.GAME)) {</span>
<span class="fc" id="L294">        tilesMatched++;</span>
      }
<span class="fc" id="L296">      return tilesMatched;</span>
<span class="nc" id="L297">    } catch (BookshelfGridColIndexOutOfBoundsException | BookshelfGridRowIndexOutOfBoundsException</span>
        | NullIndexValueException e) {
<span class="nc" id="L299">      return 0;</span>
    }
  };

  /**
   * PrivatePattern Rule #9.
   * 
   */
<span class="fc" id="L307">  public static final Function&lt;Bookshelf, Integer&gt; checkPattern9 = bs -&gt; {</span>
<span class="fc" id="L308">    int tilesMatched = 0;</span>

    try {
<span class="fc bfc" id="L311" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(0, 2).getType() == (TileType.GAME)) {</span>
<span class="fc" id="L312">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L314" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(2, 2).getType() == (TileType.CAT)) {</span>
<span class="fc" id="L315">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L317" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(3, 4).getType() == (TileType.BOOK)) {</span>
<span class="fc" id="L318">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L320" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(4, 1).getType() == (TileType.TROPHY)) {</span>
<span class="fc" id="L321">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L323" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(4, 4).getType() == (TileType.PLANT)) {</span>
<span class="fc" id="L324">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L326" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(5, 0).getType() == (TileType.FRAME)) {</span>
<span class="fc" id="L327">        tilesMatched++;</span>
      }
<span class="fc" id="L329">      return tilesMatched;</span>
<span class="nc" id="L330">    } catch (BookshelfGridColIndexOutOfBoundsException | BookshelfGridRowIndexOutOfBoundsException</span>
        | NullIndexValueException e) {
<span class="nc" id="L332">      return 0;</span>
    }
  };

  /**
   * PrivatePattern Rule #10.
   * 
   */
<span class="fc" id="L340">  public static final Function&lt;Bookshelf, Integer&gt; checkPattern10 = bs -&gt; {</span>
<span class="fc" id="L341">    int tilesMatched = 0;</span>

    try {
<span class="fc bfc" id="L344" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(0, 4).getType() == (TileType.TROPHY)) {</span>
<span class="fc" id="L345">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L347" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(1, 1).getType() == (TileType.GAME)) {</span>
<span class="fc" id="L348">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L350" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(2, 0).getType() == (TileType.BOOK)) {</span>
<span class="fc" id="L351">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L353" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(3, 3).getType() == (TileType.CAT)) {</span>
<span class="fc" id="L354">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L356" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(4, 1).getType() == (TileType.FRAME)) {</span>
<span class="fc" id="L357">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L359" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(5, 3).getType() == (TileType.PLANT)) {</span>
<span class="fc" id="L360">        tilesMatched++;</span>
      }
<span class="fc" id="L362">      return tilesMatched;</span>
<span class="nc" id="L363">    } catch (BookshelfGridColIndexOutOfBoundsException | BookshelfGridRowIndexOutOfBoundsException</span>
        | NullIndexValueException e) {
<span class="nc" id="L365">      return 0;</span>
    }
  };

  /**
   * PrivatePattern Rule #11.
   * 
   */
<span class="fc" id="L373">  public static final Function&lt;Bookshelf, Integer&gt; checkPattern11 = bs -&gt; {</span>
<span class="fc" id="L374">    int tilesMatched = 0;</span>

    try {
<span class="fc bfc" id="L377" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(0, 2).getType() == (TileType.PLANT)) {</span>
<span class="fc" id="L378">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L380" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(1, 1).getType() == (TileType.BOOK)) {</span>
<span class="fc" id="L381">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L383" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(2, 0).getType() == (TileType.GAME)) {</span>
<span class="fc" id="L384">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L386" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(3, 2).getType() == (TileType.FRAME)) {</span>
<span class="fc" id="L387">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L389" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(4, 4).getType() == (TileType.CAT)) {</span>
<span class="fc" id="L390">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L392" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(5, 3).getType() == (TileType.TROPHY)) {</span>
<span class="fc" id="L393">        tilesMatched++;</span>
      }
<span class="fc" id="L395">      return tilesMatched;</span>
<span class="nc" id="L396">    } catch (BookshelfGridColIndexOutOfBoundsException | BookshelfGridRowIndexOutOfBoundsException</span>
        | NullIndexValueException e) {
<span class="nc" id="L398">      return 0;</span>
    }
  };

  /**
   * PrivatePattern Rule #12.
   * 
   */
<span class="fc" id="L406">  public static final Function&lt;Bookshelf, Integer&gt; checkPattern12 = bs -&gt; {</span>
<span class="fc" id="L407">    int tilesMatched = 0;</span>

    try {
<span class="fc bfc" id="L410" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(0, 2).getType() == (TileType.BOOK)) {</span>
<span class="fc" id="L411">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L413" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(1, 1).getType() == (TileType.PLANT)) {</span>
<span class="fc" id="L414">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L416" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(2, 2).getType() == (TileType.FRAME)) {</span>
<span class="fc" id="L417">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L419" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(3, 3).getType() == (TileType.TROPHY)) {</span>
<span class="fc" id="L420">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L422" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(4, 4).getType() == (TileType.GAME)) {</span>
<span class="fc" id="L423">        tilesMatched++;</span>
      }
<span class="fc bfc" id="L425" title="All 2 branches covered.">      if (bs.getBookshelfGridAt(5, 0).getType() == (TileType.CAT)) {</span>
<span class="fc" id="L426">        tilesMatched++;</span>
      }
<span class="fc" id="L428">      return tilesMatched;</span>
<span class="nc" id="L429">    } catch (BookshelfGridColIndexOutOfBoundsException | BookshelfGridRowIndexOutOfBoundsException</span>
        | NullIndexValueException e) {
<span class="nc" id="L431">      return 0;</span>
    }
  };

  /**
   * The list of {@link PrivatePattern} containing all the 12 different patterns.
   * 
   */
<span class="fc" id="L439">  public static final List&lt;PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;&gt; patternsArray = List.of(</span>
<span class="fc" id="L440">      (new PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;(checkPattern1, 1)),</span>
<span class="fc" id="L441">      (new PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;(checkPattern2, 2)),</span>
<span class="fc" id="L442">      (new PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;(checkPattern3, 3)),</span>
<span class="fc" id="L443">      (new PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;(checkPattern4, 4)),</span>
<span class="fc" id="L444">      (new PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;(checkPattern5, 5)),</span>
<span class="fc" id="L445">      (new PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;(checkPattern6, 6)),</span>
<span class="fc" id="L446">      (new PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;(checkPattern7, 7)),</span>
<span class="fc" id="L447">      (new PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;(checkPattern8, 8)),</span>
<span class="fc" id="L448">      (new PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;(checkPattern9, 9)),</span>
<span class="fc" id="L449">      (new PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;(checkPattern10, 10)),</span>
<span class="fc" id="L450">      (new PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;(checkPattern11, 11)),</span>
<span class="fc" id="L451">      (new PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;(checkPattern12, 12)));</span>

  /**
   * Method used to get random PrivatePattern between the 12 possible.
   *
   * @param usedPatterns a List of {@link PrivatePattern} storing the already used
   *                     patterns.
   * @return a random pattern between the 12 possible.
   */
  public static PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt; getNotUsedPattern(
      List&lt;PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;&gt; usedPatterns) {
<span class="fc bfc" id="L462" title="All 2 branches covered.">    if (usedPatterns.isEmpty()) {</span>
<span class="fc" id="L463">      return patternsArray.get(random.nextInt(patternsArray.size()));</span>
    } else {
<span class="fc" id="L465">      List&lt;PrivatePattern&lt;Function&lt;Bookshelf, Integer&gt;&gt;&gt; unusedPatterns = patternsArray.stream()</span>
<span class="fc bfc" id="L466" title="All 2 branches covered.">          .filter(pattern -&gt; !usedPatterns.contains(pattern))</span>
<span class="fc" id="L467">          .collect(Collectors.toList());</span>
<span class="fc" id="L468">      return unusedPatterns.get(random.nextInt(unusedPatterns.size()));</span>
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>